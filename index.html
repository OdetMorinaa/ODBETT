<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>OdBett</title>
<style>
/* Reset and Global Styles */
* {
margin: 0;
padding: 0;
box-sizing: border-box;
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
background-color: white;
color: #2ecc71;
line-height: 1.6;
}

/* Container and Layout */
.container {
max-width: 1200px;
margin: 0 auto;
padding: 10px;
}

/* Header */
.header {
background-color: #2ecc71;
color: white;
padding: 15px 20px;
display: flex;
justify-content: space-between;
align-items: center;
box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.logo {
font-size: 1.8rem;
font-weight: bold;
}

.user-info {
font-size: 1rem;
}

/* Hidden Class */
.hidden {
display: none;
}

/* Panels */
.panel {
background: white;
border: 1px solid #2ecc71;
border-radius: 8px;
margin: 20px 0;
overflow: hidden;
box-shadow: 0 2px 10px rgba(46, 204, 113, 0.1);
}

.panel-header {
background-color: #2ecc71;
color: white;
padding: 12px 15px;
font-size: 1.1rem;
font-weight: 600;
}

.panel-body {
padding: 15px;
}

/* Forms */
.form-group {
margin-bottom: 15px;
}

label {
display: block;
margin-bottom: 5px;
font-weight: 500;
}

input, select, button {
width: 100%;
padding: 10px;
border: 1px solid #2ecc71;
border-radius: 5px;
font-size: 1rem;
}

input:focus, select:focus {
outline: none;
border-color: #27ae60;
box-shadow: 0 0 5px rgba(46, 204, 113, 0.3);
}

button {
background-color: #2ecc71;
color: white;
border: none;
cursor: pointer;
font-weight: 600;
transition: background 0.3s;
margin-top: 5px;
}

button:hover {
background-color: #27ae60;
}

/* Button Types */
.btn-danger {
background-color: #e74c3c;
}

.btn-danger:hover {
background-color: #c0392b;
}

/* Tables */
.table {
width: 100%;
border-collapse: collapse;
margin: 15px 0;
}

.table th, .table td {
padding: 12px;
text-align: left;
border-bottom: 1px solid #eee;
}

.table th {
background-color: #2ecc71;
color: white;
}

.table tr:hover {
background-color: #f8f8f8;
}

/* Cards */
.card {
border: 1px solid #2ecc71;
border-radius: 8px;
padding: 15px;
margin-bottom: 15px;
background: white;
}

.card-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 10px;
}

/* Balance Display */
.balance {
font-size: 1.2rem;
font-weight: 600;
color: #2ecc71;
text-align: center;
padding: 15px;
background-color: #f9f9f9;
border: 1px solid #2ecc71;
border-radius: 8px;
margin: 15px 0;
}

/* Flex Layout */
.flex {
display: flex;
gap: 10px;
}

.flex-1 { flex: 1; }
.flex-2 { flex: 2; }
.flex-3 { flex: 3; }

/* Responsive Design */
@media (max-width: 768px) {
.flex {
flex-direction: column;
}

.header {
flex-direction: column;
text-align: center;
gap: 10px;
}

.user-info {
order: -1;
}

.table th, .table td {
padding: 8px;
font-size: 0.9rem;
}

input, button {
font-size: 0.95rem;
}
}

/* Login Form */
.login-container {
max-width: 400px;
margin: 50px auto;
padding: 30px;
border: 2px solid #2ecc71;
border-radius: 10px;
text-align: center;
}

.login-container h1 {
margin-bottom: 20px;
color: #2ecc71;
}

.error {
color: #e74c3c;
margin: 10px 0;
font-weight: 600;
}

/* Bet Buttons */
.bet-button {
background-color: #2ecc71;
color: white;
border: none;
padding: 8px 12px;
margin: 2px;
border-radius: 4px;
cursor: pointer;
font-size: 0.9rem;
}

/* Status Badges */
.status {
padding: 3px 8px;
border-radius: 12px;
font-size: 0.8rem;
font-weight: 600;
}

.status-pending {
background-color: #f39c12;
color: white;
}

.status-won {
background-color: #27ae60;
color: white;
}

.status-lost {
background-color: #e74c3c;
color: white;
}
</style>
</head>
<body>
<!-- Header -->
<div class="header">
<div class="logo">OdBett</div>
<div class="user-info" id="userInfo">Guest</div>
</div>

<!-- Login View -->
<div class="login-container" id="loginView">
<h1>Welcome</h1>
<form id="loginForm">
<div class="form-group">
<input type="text" id="username" placeholder="Username" required />
</div>
<div class="form-group">
<input type="password" id="password" placeholder="Password" required />
</div>
<button type="submit">Log In</button>
<div id="errorMessage" class="error hidden"></div>
</form>
</div>

<!-- Admin View -->
<div id="adminView" class="container hidden">
<!-- User Management -->
<div class="panel">
<div class="panel-header">User Management</div>
<div class="panel-body">
<!-- Create User -->
<form id="createUserForm" class="flex">
<div class="form-group flex-1">
<input type="text" id="newUsername" placeholder="Username" required />
</div>
<div class="form-group flex-1">
<input type="password" id="newPassword" placeholder="Password" required />
</div>
<div class="form-group flex-1">
<button type="submit">Create User</button>
</div>
</form>

<!-- Add Points -->
<form id="addPointsForm" class="flex">
<div class="form-group flex-1">
<input type="text" id="targetUser" placeholder="Username" required />
</div>
<div class="form-group flex-1">
<input type="number" id="pointsAmount" placeholder="Amount" min="1" required />
</div>
<div class="form-group flex-1">
<button type="submit">Add Points</button>
</div>
</form>

<!-- Users List -->
<h3>All Users</h3>
<table class="table">
<thead>
<tr>
<th>Username</th>
<th>BetPoints</th>
</tr>
</thead>
<tbody id="usersList"></tbody>
</table>
</div>
</div>

<!-- Game Management -->
<div class="panel">
<div class="panel-header">Game Management</div>
<div class="panel-body">
<!-- Add Game -->
<form id="addGameForm" class="flex">
<div class="form-group flex-1">
<input type="text" id="gameTitle" placeholder="Game Title" required />
</div>
<div class="form-group flex-1">
<input type="text" id="team1" placeholder="Team 1" required />
</div>
<div class="form-group flex-1">
<input type="number" id="odds1" placeholder="Odds 1" step="0.01" min="1" required />
</div>
<div class="form-group flex-1">
<input type="text" id="team2" placeholder="Team 2" required />
</div>
<div class="form-group flex-1">
<input type="number" id="odds2" placeholder="Odds 2" step="0.01" min="1" required />
</div>
<div class="form-group flex-1">
<button type="submit">Add Game</button>
</div>
</form>

<!-- Games List -->
<h3>Active Games</h3>
<div id="gamesList"></div>
</div>
</div>

<button id="adminLogout" class="btn-danger" style="width: 100%;">Log Out</button>
</div>

<!-- User View -->
<div id="userView" class="container hidden">
<div class="balance" id="userBalance">BetPoints: 0</div>

<!-- Games List -->
<div class="panel">
<div class="panel-header">Available Games</div>
<div class="panel-body">
<div id="userGamesList"></div>
</div>
</div>

<!-- Bet History -->
<div class="panel">
<div class="panel-header">Bet History</div>
<div class="panel-body">
<table class="table">
<thead>
<tr>
<th>Game</th>
<th>Team</th>
<th>Amount</th>
<th>Odds</th>
<th>Payout</th>
<th>Status</th>
</tr>
</thead>
<tbody id="betHistory"></tbody>
</table>
</div>
</div>

<button id="userLogout" class="btn-danger" style="width: 100%;">Log Out</button>
</div>

<script>
// DOM Elements
const loginView = document.getElementById('loginView');
const adminView = document.getElementById('adminView');
const userView = document.getElementById('userView');
const userInfo = document.getElementById('userInfo');
const errorMessage = document.getElementById('errorMessage');
const userBalance = document.getElementById('userBalance');
const usersList = document.getElementById('usersList');
const gamesList = document.getElementById('gamesList');
const userGamesList = document.getElementById('userGamesList');
const betHistory = document.getElementById('betHistory');

// Form Elements
const loginForm = document.getElementById('loginForm');
const createUserForm = document.getElementById('createUserForm');
const addPointsForm = document.getElementById('addPointsForm');
const addGameForm = document.getElementById('addGameForm');
const adminLogout = document.getElementById('adminLogout');
const userLogout = document.getElementById('userLogout');

// Input Elements
const username = document.getElementById('username');
const password = document.getElementById('password');
const newUsername = document.getElementById('newUsername');
const newPassword = document.getElementById('newPassword');
const targetUser = document.getElementById('targetUser');
const pointsAmount = document.getElementById('pointsAmount');
const gameTitle = document.getElementById('gameTitle');
const team1 = document.getElementById('team1');
const odds1 = document.getElementById('odds1');
const team2 = document.getElementById('team2');
const odds2 = document.getElementById('odds2');

// Current logged-in user
let currentUser = null;
let isAdmin = false;

// Initialize localStorage
function initStorage() {
  if (!localStorage.getItem('users')) {
    const adminUser = { username: 'Odii01', password: 'Odi049', points: 1000 };
    localStorage.setItem('users', JSON.stringify([adminUser]));
  }
  if (!localStorage.getItem('games')) localStorage.setItem('games', JSON.stringify([]));
  if (!localStorage.getItem('bets')) localStorage.setItem('bets', JSON.stringify([]));
}

// Storage Access
function getUsers() {
  return JSON.parse(localStorage.getItem('users')) || [];
}
function getGames() {
  return JSON.parse(localStorage.getItem('games')) || [];
}
function getBets() {
  return JSON.parse(localStorage.getItem('bets')) || [];
}
function saveUsers(users) {
  localStorage.setItem('users', JSON.stringify(users));
}
function saveGames(games) {
  localStorage.setItem('games', JSON.stringify(games));
}
function saveBets(bets) {
  localStorage.setItem('bets', JSON.stringify(bets));
}

// User Management
function findUser(username) {
  return getUsers().find(u => u.username === username);
}
function updateUser(user) {
  const users = getUsers();
  const index = users.findIndex(u => u.username === user.username);
  if (index !== -1) {
    users[index] = user;
    saveUsers(users);
    return true;
  }
  return false;
}
function addUser(username, password) {
  if (findUser(username)) return false;
  const users = getUsers();
  users.push({ username, password, points: 100 });
  saveUsers(users);
  return true;
}
function addPointsToUser(username, amount) {
  const user = findUser(username);
  if (user) {
    user.points += parseInt(amount);
    updateUser(user);
    return true;
  }
  return false;
}
function deleteUser(username) {
  const users = getUsers().filter(user => user.username !== username);
  saveUsers(users);
  const bets = getBets().filter(bet => bet.username !== username);
  saveBets(bets);
}

// Game Management
function createGame(title, team1, team2, odds1, odds2) {
  const games = getGames();
  const newGame = {
    id: Date.now().toString(),
    title,
    team1,
    team2,
    odds1: parseFloat(odds1),
    odds2: parseFloat(odds2),
    result: null
  };
  games.push(newGame);
  saveGames(games);
  return newGame;
}
function resolveGame(gameId, winner) {
  const games = getGames();
  const index = games.findIndex(g => g.id === gameId);
  if (index === -1 || games[index].result !== null) return false;
  games[index].result = winner;
  saveGames(games);

  const bets = getBets();
  bets.forEach(bet => {
    if (bet.gameId === gameId) {
      const user = findUser(bet.username);
      if (!user) return;
      if (bet.team === winner) {
        user.points += bet.amount * bet.odds;
        bet.status = 'won';
        updateUser(user);
      } else {
        bet.status = 'lost';
      }
    }
  });
  saveBets(bets);
  return true;
}
function placeBet(username, gameId, team, amount, odds) {
  const user = findUser(username);
  if (!user || user.points < amount) return false;
  user.points -= amount;
  updateUser(user);

  const bets = getBets();
  bets.push({
    id: Date.now().toString(),
    username,
    gameId,
    team,
    amount,
    odds,
    status: 'pending'
  });
  saveBets(bets);
  return true;
}

// View Functions
function displayUsers() {
  const users = getUsers();
  usersList.innerHTML = '';
  users.forEach(user => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${user.username}</td>
      <td>${user.points}</td>
      <td>
        <button class="btn-danger delete-user-btn" data-username="${user.username}" ${
          user.username === 'Odii01' ? 'disabled title="Cannot delete admin user"' : ''
        }>Delete</button>
      </td>
    `;
    usersList.appendChild(tr);
  });

  document.querySelectorAll('.delete-user-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const usernameToDelete = btn.getAttribute('data-username');
      if (confirm(`Are you sure you want to delete "${usernameToDelete}"?`)) {
        deleteUser(usernameToDelete);
        displayUsers();
      }
    });
  });
}

// Other View Functions (e.g., displayGames, displayUserGames, displayUserBets) remain unchanged — refer to your original code for those

// Utility
function showError(msg) {
  errorMessage.textContent = msg;
  errorMessage.classList.remove('hidden');
}
function clearError() {
  errorMessage.textContent = '';
  errorMessage.classList.add('hidden');
}
function showView(view) {
  [loginView, adminView, userView].forEach(v => v.classList.add('hidden'));
  view.classList.remove('hidden');
}

// Events
loginForm.addEventListener('submit', function (e) {
  e.preventDefault();
  clearError();
  const u = username.value.trim();
  const p = password.value;

  if (u === 'Odii01' && p === 'Odi049') {
    currentUser = findUser(u);
    isAdmin = true;
    userInfo.textContent = `Admin: ${u}`;
    showView(adminView);
    displayUsers();
    displayGames();
    return;
  }

  const user = findUser(u);
  if (user && user.password === p) {
    currentUser = user;
    isAdmin = false;
    userInfo.textContent = `User: ${u}`;
    showView(userView);
    userBalance.textContent = `BetPoints: ${user.points}`;
    displayUserGames();
    displayUserBets();
    return;
  }

  showError('Invalid username or password.');
});

createUserForm.addEventListener('submit', function (e) {
  e.preventDefault();
  clearError();
  const u = newUsername.value.trim();
  const p = newPassword.value;

  if (addUser(u, p)) {
    newUsername.value = '';
    newPassword.value = '';
    displayUsers();
    alert('User created.');
  } else {
    showError('Username already exists.');
  }
});

addPointsForm.addEventListener('submit', function (e) {
  e.preventDefault();
  clearError();
  const u = targetUser.value.trim();
  const amt = pointsAmount.value;
  if (addPointsToUser(u, amt)) {
    targetUser.value = '';
    pointsAmount.value = '';
    displayUsers();
    alert(`Added ${amt} points to ${u}.`);
  } else {
    showError('User not found.');
  }
});

addGameForm.addEventListener('submit', function (e) {
  e.preventDefault();
  clearError();
  if (
    createGame(
      gameTitle.value.trim(),
      team1.value.trim(),
      team2.value.trim(),
      odds1.value,
      odds2.value
    )
  ) {
    gameTitle.value = '';
    team1.value = '';
    team2.value = '';
    odds1.value = '';
    odds2.value = '';
    displayGames();
    if (currentUser && !isAdmin) displayUserGames();
    alert('Game added.');
  } else {
    showError('Failed to add game.');
  }
});

adminLogout.addEventListener('click', () => {
  currentUser = null;
  isAdmin = false;
  userInfo.textContent = 'Guest';
  showView(loginView);
});

userLogout.addEventListener('click', () => {
  currentUser = null;
  isAdmin = false;
  userInfo.textContent = 'Guest';
  showView(loginView);
});

// Init
initStorage();
showView(loginView);

</script>
</body>
</html>
